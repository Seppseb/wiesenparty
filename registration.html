<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wiesenparty Anmeldung</title>
<link rel="icon" href="image.ico" type="image/x-icon">
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        /* Add the background image */
        background-image: url('image.png');
        background-size: cover; /* Cover the entire background */
        background-repeat: no-repeat; /* Prevent repeating of the image */
        background-attachment: fixed; /* Fixed positioning */
        color: #333; /* Dark text color */
        transition: background-color 0.3s, color 0.3s;
    }
    .container {
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.8); /* Adjust opacity here */
        transition: background-color 0.3s;
    }
    input[type="text"], input[type="date"] {
        width: calc(100% - 20px); /* Adjusted for border */
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        background-color: #f5f5f5; /* Light input background color */
        color: #333; /* Dark text color */
    }
    .error-message {
        color: red;
        font-size: 12px;
        display: none;
    }
    button {
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 10px;
        background-color: #333; /* Dark button background color */
    }
    .input-instruction {
        margin-bottom: 5px;
    }
    .input-instruction-important {
        margin-bottom: 5px;
    color: #ff6666; /* Lighter red color */
    }
    /* Dark Mode Styles */
    body.dark-mode {
        background-color: #222; /* Dark background color */
        color: #ddd; /* Light text color */
    }
    body.dark-mode .container {
        background-color: rgba(51, 51, 51, 0.95); /* Adjust opacity for dark mode */
    }
    body.dark-mode input[type="text"],
    body.dark-mode input[type="date"] {
        background-color: #444; /* Dark input background color */
        color: #ddd; /* Light text color */
    }
    body.dark-mode .error-message {
        color: #ff5555; /* Light error message color */
    }
    body.dark-mode button {
        background-color: #555; /* Dark button background color */
    }
    .required {
    color: #ff6666; /* Lighter red color */
    }
    .cursive {
    font-style: italic; /* Set the font style to italic */
  }
    select {
        /* Existing styles */
        width: calc(100% - 20px);
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        background-color: #f5f5f5;
        color: #333;
        border-color: #999; /* Adjust border color */
        font-size: 16px;
        cursor: pointer;
    }

    /* Modify hover effect */
    select:hover {
        background-color: #e0e0e0; /* Adjust hover background color */
    }

    /* Dark mode styles */
    body.dark-mode select {
        background-color: #444; /* Dark input background color */
        color: #ddd; /* Light text color */
        border-color: #666; /* Dark border color */
    }

    body.dark-mode select option {
        background-color: #333; /* Dark background color */
        color: #ddd; /* Light text color */
    }

    body.dark-mode select:hover {
        background-color: #666; /* Dark hover background color */
    }

</style>
</head>
<body>

<div class="container">
    <h2>Wiesenparty Anmeldung</h2>
    <div class="input-instruction"><span class="required">*</span> erforderlich</div>
    <div class="input-instruction">Bitte deinen Vornamen<span class="required">*</span> eingeben:</div>
    <input type="text" id="vorname" placeholder="Vorname">
    <span class="error-message" id="vorname-error">Bitte geben Sie Ihren Vornamen ein.</span>
    <div class="input-instruction">Bitte deinen Nachnamen<span class="required">*</span> eingeben:</div>
    <input type="text" id="nachname" placeholder="Nachname">
    <span class="error-message" id="nachname-error">Bitte geben Sie Ihren Nachnamen ein.</span>
    <div class="input-instruction">Bitte deine Email-Adresse<span class="required">*</span> eingeben:</div>
    <input type="text" id="email" placeholder="Email">
    <span class="error-message" id="email-error">Bitte geben Sie eine gültige Email-Adresse ein.</span>
    <div class="input-instruction">Bitte deine Handynummer<span class="required">*</span> eingeben:</div>
    <input type="text" id="handynummer" placeholder="Handynummer">
    <span class="error-message" id="handynummer-error">Bitte geben Sie Ihre Handynummer ein.</span>
    <div class="input-instruction">Bitte deine Stadt<span class="required">*</span> eingeben:</div>
    <input type="text" id="stadt" placeholder="Stadt">
    <span class="error-message" id="stadt-error">Bitte geben Sie Ihre Stadt ein.</span>
    <div class="input-instruction">Bitte deine Straße<span class="required">*</span> eingeben:</div>
    <input type="text" id="straße" placeholder="Straße">
    <span class="error-message" id="straße-error">Bitte geben Sie Ihre Straße ein.</span>
    <div class="input-instruction">Bitte deine Hausnummer<span class="required">*</span> eingeben:</div>
    <input type="text" id="hausnummer" placeholder="Hausnummer">
    <span class="error-message" id="hausnummer-error">Bitte geben Sie Ihre Hausnummer ein.</span>
    <div class="input-instruction">Bitte dein Geburtsdatum<span class="required">*</span> eingeben:</div>
    <input type="date" id="birthday" placeholder="Geburtsdatum">
    <span class="error-message" id="birthday-error">Sie müssen mindestens 19 Jahre alt sein, um sich anzumelden.</span>
    <div class="input-instruction">Möchtest du den kostenlosen Campingplatz nutzen<span class="required">*</span>:</div>
    <select id="camping-sleep">
        <option value="" disabled selected>Bitte wählen</option>
        <option value="ja">Ja</option>
        <option value="nein">Nein</option>
        <option value="vielleicht">Vielleicht</option>
    </select>
    <span class="error-message" id="camping-sleep-error">Bitte wählen Sie eine Option aus.</span>
    <div class="input-instruction">Bitte dein Wunschlied eingeben:</div>
    <input type="text" id="song" placeholder="Wunschlied">
    <div class="input-instruction">Bitte dein Lieblingsgetränk eingeben:</div>
    <input type="text" id="drink" placeholder="Lieblingsgetränk">
    <br>
    <br>
    <div class="input-instruction-important">Deine Anmeldung ist nur gültig wenn du alle folgenden Schritte durchführst:</div>
    <div class="input-instruction-important">1. Fülle die oben stehenden Felder aus und lade das Formular herunter</div>
    <button onclick="generateAndDownloadCSV()">Formular Generieren & Herunterladen</button>
    <br>
    <br>
    <div class="input-instruction-important">2. Sende die Datei mit dem Namen "<span class="cursive">Nachname</span>-<span class="cursive">Vorname</span>-Wiesenparty.csv" an die verlinkte Nummer über Whatsapp</div>
    <a href="https://wa.me/4915732920772" target="_blank"><button>WhatsApp Chat</button></a>
    <br>
    <br>
    <div class="input-instruction-important">3. Schicke 30€ direkt nach deiner Anmeldung per Paypal Freunde an das verlinkte Paypal Profil, gib als Verwendungszweck Vor- und Nachnamen der Personen an, für die du bezahlst</div>
    <div class="input-instruction-important">Damit der Link funktioniert musst du auf Paypal angemeldet sein! Falls sich das Profil nicht öffnet, sende das Geld manuell an "david4.schumacher@t-online.de"</div>
    <a href="https://www.paypal.com/paypalme/davidschumacher06/30" target="_blank"><button>PayPal</button></a>
</div>

<div style="text-align: center; margin-top: 20px;">
    <label for="dark-mode-toggle">Dark Mode</label>
    <!-- Bind the "checked" attribute to isDarkMode -->
    <input type="checkbox" id="dark-mode-toggle" onchange="toggleDarkMode()" checked> 
</div>


<script>
        // Load dark mode state on page load
    document.addEventListener('DOMContentLoaded', function() {
        const isDarkMode = !localStorage.getItem('darkMode')|| localStorage.getItem('darkMode') === 'true'; // Set default to false if not found
        const body = document.body;
        if (isDarkMode) {
            body.classList.add('dark-mode');
        }
        // Update checkbox state
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        darkModeToggle.checked = isDarkMode;
    });

    function toggleDarkMode() {
        const body = document.body;
        const isDarkMode = body.classList.toggle('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
        // Update checkbox state
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        darkModeToggle.checked = isDarkMode;
    }

    function generateAndDownloadCSV() {
        const vorname = document.getElementById('vorname').value.trim();
        const nachname = document.getElementById('nachname').value.trim();
        const email = document.getElementById('email').value.trim();
        const handynummer = document.getElementById('handynummer').value.trim();
        const stadt = document.getElementById('stadt').value.trim();
        const straße = document.getElementById('straße').value.trim();
        const hausnummer = document.getElementById('hausnummer').value.trim();
        const birthday = document.getElementById('birthday').value;
        const song = document.getElementById('song').value.trim();
        const drink = document.getElementById('drink').value.trim();
        const campingSleep = document.getElementById('camping-sleep').value;


        // Validation
        let isValid = true;
        if (vorname === '') {
            document.getElementById('vorname-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('vorname-error').style.display = 'none';
        }
        if (nachname === '') {
            document.getElementById('nachname-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('nachname-error').style.display = 'none';
        }
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('email-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('email-error').style.display = 'none';
        }
        if (handynummer === '') {
            document.getElementById('handynummer-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('handynummer-error').style.display = 'none';
        }
        if (stadt === '') {
            document.getElementById('stadt-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('stadt-error').style.display = 'none';
        }
        if (straße === '') {
            document.getElementById('straße-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('straße-error').style.display = 'none';
        }
        if (hausnummer === '') {
            document.getElementById('hausnummer-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('hausnummer-error').style.display = 'none';
        }
        if (!birthday || getAge(birthday) < 19) {
            document.getElementById('birthday-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('birthday-error').style.display = 'none';
        }
        if (!campingSleep) {
            document.getElementById('camping-sleep-error').style.display = 'block';
            isValid = false;
        } else {
            document.getElementById('camping-sleep-error').style.display = 'none';
        }

        if (!isValid) {
            return;
        }

        const csvContent = `Vorname,Nachname,Email,Handynummer,Stadt,Straße,Hausnummer,Geburtsdatum,Wunschlied,Lieblingsgetränk,Schlafen auf dem Campingplatz\n${vorname},${nachname},${email},${handynummer},${stadt},${straße},${hausnummer},${birthday},${song},${drink},${campingSleep}`;
        const blob = new Blob([csvContent], { type: 'text/csv' });

        // Set CSV file name to nachname-vorname.csv
        const fileName = `${nachname}-${vorname}-Wiesenparty.csv`;

        const url = URL.createObjectURL(blob);

        // Create download link
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        a.setAttribute('download', fileName); // Added download attribute
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }

    function getAge(birthDateString) {
        const today = new Date("2024-06-21");
        const birthDate = new Date(birthDateString);
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDifference = today.getMonth() - birthDate.getMonth();
        if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }
</script>

</body>
</html>
